<a-scene id="scene" cursor="rayOrigin: mouse" raycaster="far: 20; objects: a-piece" physics="debug: true; friction: 0.6; restitution: 0.05" shadow="type: pcfsoft" embedded>
    <a-assets>
        <img id='board' src='/assets/{{game}}/images/{{boardImage}}' />
        {% for card in deck %}
        <img id='{{ card.name }}' src='/assets/{{game}}/images/{{card.image}}' />
        {% endfor %}
    </a-assets>
    <a-entity id='rig' position="0 2 -2" rotation="-80 0 0" camera="fov: 70" wasd-controls="acceleration: 100" game-controls>
        <a-hand id='hand' position='0 -1.5 -2'>
        </a-hand>
    </a-entity>
    <a-entity template="src: /assets/templates/boxes.njk; type: nunjucks"
        data-box1color="red" data-box2color="green" data-box3color="blue"></a-entity>
    <a-piece front='#board' 
    shadow
    src='#board'
    static-body
    draggable='false'
    position='0 -2 -3'
    rotation='-90 0 0'
    width='6'
    height='4'
    depth='.1'
    /></a-piece>
   
    <a-deck rotation='-90 0 0' position='0 -2 -2'>
    {% for card in deck %}
        <a-piece dynamic=false position='0 0 {{ loop.index0 * 0.01 - deck.length * 0.005 }}' front='#{{ card.name }}' /></a-piece>
    {% endfor %}
    </a-deck>

    <a-piece dynamic=true position='0, -2, -3' width='.1' height='.1' depth='.1' color='#F22' /></a-piece>
    <a-piece dynamic=true position='0, -1.9, -3' width='.1' height='.1' depth='.1' color='#22F' /></a-piece>
    <a-piece dynamic=true position='0, -1.8, -3' width='.1' height='.1' depth='.1' color='#222' /></a-piece>
    <a-piece dynamic=true position='0, -1.7, -3' width='.1' height='.1' depth='.1' color='#FF2' /></a-piece>

    <a-box dynamic-body shadow position='-1 0.5 -3' rotation='44 44 0' color='#4CC3D9'>
    </a-box>
    <a-sphere dynamic-body shadow position='0 1.25 -5' radius='1.25' color='#EF2D5E'>
    </a-sphere>
    <a-cylinder
    shadow
    dynamic-body 
    position='1 0.75 -3'
    radius='0.5'
    height='1.5'
    color='#FFC65D'
    >
    </a-cylinder>
    <a-light type='ambient' color='#445451'></a-light>
    
    <a-light type='directional' intensity='.4' position='2 4 2' light='castShadow: true; shadowCameraVisible: true; shadowBias: -0.00001; shadowMapWidth: 1024; shadowMapHeight: 1024' ></a-light>
    <a-light type='directional' intensity='.4' position='2 4 2' ></a-light>

    <a-sky color='#333333' />
</a-scene>
